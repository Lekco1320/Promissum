<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrl="clr-namespace:Lekco.Wpf.Control"
                    xmlns:cvt="clr-namespace:Lekco.Wpf.Utility.Converter"
                    xmlns:vm="clr-namespace:Lekco.Wpf.MVVM.Sorter">

    <cvt:NullableBooleanConverter x:Key="NullableBooleanConverter" />

    <Style TargetType="{x:Type ctrl:PropertySorterView}">

        <Setter Property="BorderBrush"
                Value="{DynamicResource CGrayBrush}" />

        <Setter Property="Background"
                Value="{DynamicResource CWhiteBrush}" />

        <Setter Property="Padding"
                Value="0,2" />

        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                Value="Auto" />

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ctrl:PropertySorterView}">

                    <Grid>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Border x:Name="PART_ButtonDock"
                                Padding="0,2"
                                Background="{DynamicResource GWhiteToCLightGrayBrush}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1,1,1,0"
                                CornerRadius="3,3,0,0">

                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <ctrl:IconButton Grid.Column="0"
                                                 HorizontalAlignment="Center"
                                                 Command="{x:Static ctrl:PropertySorterView.AddSorter}"
                                                 IconData="M19 4H3v2h16V4zm0 4H3v2h16V8zM3 12h8v2H3v-2zm8 4H3v2h8v-2zm7-1h3v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"
                                                 ToolTip="添加规则" />

                                <ctrl:IconButton Grid.Column="1"
                                                 HorizontalAlignment="Center"
                                                 Command="{x:Static ctrl:PropertySorterView.RemoveSorter}"
                                                 IconData="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"
                                                 IsEnabled="{TemplateBinding SelectedItem,
                                                                             Converter={StaticResource NullableBooleanConverter}}"
                                                 ToolTip="删除规则" />

                                <ctrl:IconButton Grid.Column="2"
                                                 HorizontalAlignment="Center"
                                                 Command="{x:Static ctrl:PropertySorterView.UpMoveSorter}"
                                                 IconData="M36,128a12,12,0,0,1,12-12h68a12,12,0,0,1,0,24H48A12,12,0,0,1,36,128ZM48,76h52a12,12,0,0,0,0-24H48a12,12,0,0,0,0,24ZM180,180H48a12,12,0,0,0,0,24H180a12,12,0,0,0,0-24ZM232.49,79.51l-40-40a12,12,0,0,0-17,0l-40,40a12,12,0,0,0,17,17L172,77v67a12,12,0,0,0,24,0V77l19.51,19.52a12,12,0,0,0,17-17Z"
                                                 IsEnabled="{TemplateBinding SelectedItem,
                                                                             Converter={StaticResource NullableBooleanConverter}}"
                                                 ToolTip="上移" />

                                <ctrl:IconButton Grid.Column="3"
                                                 HorizontalAlignment="Center"
                                                 Command="{x:Static ctrl:PropertySorterView.DownMoveSorter}"
                                                 IconData="M128,128a12,12,0,0,1-12,12H48a12,12,0,0,1,0-24h68A12,12,0,0,1,128,128ZM48,76H180a12,12,0,0,0,0-24H48a12,12,0,0,0,0,24Zm52,104H48a12,12,0,0,0,0,24h52a12,12,0,0,0,0-24Zm132.49-20.49a12,12,0,0,0-17,0L196,179V112a12,12,0,0,0-24,0v67l-19.51-19.52a12,12,0,0,0-17,17l40,40a12,12,0,0,0,17,0l40-40A12,12,0,0,0,232.49,159.51Z"
                                                 IsEnabled="{TemplateBinding SelectedItem,
                                                                             Converter={StaticResource NullableBooleanConverter}}"
                                                 ToolTip="下移" />

                            </Grid>

                        </Border>

                        <Border Grid.Row="1"
                                Padding="{TemplateBinding Padding}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="0,0,3,3">

                            <ScrollViewer x:Name="PART_ScrollViewer"
                                          HorizontalAlignment="Stretch"
                                          HorizontalContentAlignment="Stretch"
                                          Focusable="false"
                                          HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Auto">

                                <ItemsPresenter />

                            </ScrollViewer>

                        </Border>

                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ListViewItem}">

                    <Setter Property="Margin"
                            Value="0,0.5" />

                    <Setter Property="Padding"
                            Value="0,1.5" />

                    <Setter Property="BorderThickness"
                            Value="0" />

                    <Setter Property="Background"
                            Value="White" />

                    <Setter Property="HorizontalContentAlignment"
                            Value="Stretch" />

                    <Setter Property="HorizontalAlignment"
                            Value="Stretch" />

                    <Setter Property="Tag"
                            Value="{DynamicResource GCBlueToCDeepBlueBrush}" />

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ListViewItem}">

                                <Border x:Name="Border"
                                        Padding="{TemplateBinding Padding}"
                                        HorizontalAlignment="Stretch"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="3"
                                        SnapsToDevicePixels="true">

                                    <ContentPresenter Margin="5,0,0,0"
                                                      HorizontalAlignment="Stretch"
                                                      RecognizesAccessKey="True" />

                                </Border>

                                <ControlTemplate.Triggers>

                                    <Trigger SourceName="Border"
                                             Property="IsMouseOver"
                                             Value="True">

                                        <Setter Property="Background"
                                                Value="{DynamicResource CLightGrayBrush}" />

                                    </Trigger>

                                    <MultiTrigger>

                                        <MultiTrigger.Conditions>

                                            <Condition Property="IsSelected"
                                                       Value="True" />

                                            <Condition Property="IsEnabled"
                                                       Value="True" />

                                            <Condition Property="Selector.IsSelectionActive"
                                                       Value="True" />

                                        </MultiTrigger.Conditions>

                                        <MultiTrigger.Setters>

                                            <Setter Property="Background"
                                                    Value="{DynamicResource GCBlueToCDeepBlueBrush}" />

                                            <Setter Property="Foreground"
                                                    Value="{DynamicResource CWhiteBrush}" />

                                            <Setter Property="Tag"
                                                    Value="{DynamicResource CWhiteBrush}" />

                                        </MultiTrigger.Setters>

                                    </MultiTrigger>

                                    <MultiTrigger>

                                        <MultiTrigger.Conditions>

                                            <Condition Property="Selector.IsSelectionActive"
                                                       Value="False" />

                                            <Condition Property="IsSelected"
                                                       Value="True" />

                                            <Condition Property="IsEnabled"
                                                       Value="True" />

                                        </MultiTrigger.Conditions>

                                        <MultiTrigger.Setters>

                                            <Setter Property="Background"
                                                    Value="#EAEAEA" />

                                        </MultiTrigger.Setters>

                                    </MultiTrigger>

                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>

                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate DataType="{x:Type vm:PropertySorterVM`1}">

                    <Grid Margin="3,0">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <ToggleButton Grid.Column="0"
                                      VerticalAlignment="Center"
                                      Foreground="{Binding Tag, RelativeSource={RelativeSource AncestorType=ListViewItem}}"
                                      IsChecked="{Binding Descending}">

                            <ToggleButton.Style>
                                <Style TargetType="{x:Type ToggleButton}">

                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type ToggleButton}">

                                                <Path x:Name="Icon"
                                                      Width="13"
                                                      Height="13"
                                                      Data="M19 17H22L18 21L14 17H17V3H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z"
                                                      Fill="{TemplateBinding Foreground}"
                                                      Stretch="Uniform" />

                                                <ControlTemplate.Triggers>

                                                    <Trigger Property="IsChecked"
                                                             Value="True">

                                                        <Setter TargetName="Icon"
                                                                Property="Data"
                                                                Value="M19 7H22L18 3L14 7H17V21H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z" />

                                                    </Trigger>

                                                </ControlTemplate.Triggers>

                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>

                                </Style>
                            </ToggleButton.Style>

                        </ToggleButton>

                        <TextBlock Grid.Column="1"
                                   Margin="8,0,0,0"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Center"
                                   Text="{Binding DisplayName}" />

                    </Grid>

                </DataTemplate>
            </Setter.Value>
        </Setter>

    </Style>

</ResourceDictionary>